<!DOCTYPE html>
<html lang="ko" style="font-size: 10px;">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>차량검색 필터선택 | iM캐피탈</title>

    <link rel="stylesheet" href="/static/web/css/styles.css">
    <link rel="stylesheet" href="/static/web/css/nouislider.css">

    <script src="/static/web/js/lib/jquery-3.6.0.min.js"></script>
    <script src="/static/web/js/ui_common.js"></script>
    <script src="/static/web/js/lib/nouislider.min.js"></script>
</head>
<body>

<script type="text/javascript">
    function addrPopupAll() {
        uiCommon.openPopup("addrPopup");
    }
    window.addEventListener('load', addrPopupAll);
</script>
<script>
$(function() {
    $('.car-select-option button').on('click', function() {
       $(this).parent('div').remove();
    });

    var slider = document.getElementById('slider');
    noUiSlider.create(slider, {
        start: [40, 160],
        step: 10,
        margin: 10,
        connect: true,
        range: {
            'min': 0,
            'max': 200
        }
    });

    function DragScroll($boxes, ns = 'dragScroll') {
		$boxes.each(function(index) {
			const $box = $(this);
			let down = false, moved = false, startX = 0, startScroll = 0;
			const evt = `.${ns}-${index}`; // 박스별 고유 이벤트 네임스페이스

			// 기존 이벤트 제거
			$box.off(evt);
			$(document).off(evt);

			// 드래그 시작
			$box.on(`mousedown${evt}`, e => {
				down = true;
				moved = false;
				startX = e.pageX;
				startScroll = $box.scrollLeft();
				$box.addClass('dragging').css('user-select', 'none');

				if ($(e.target).closest('a').length) e.preventDefault();
			});

			// 드래그 이동
			$(document).on(`mousemove${evt}`, e => {
				if (!down) return;
				const dx = e.pageX - startX;
				if (Math.abs(dx) > 5) moved = true;

				if (moved) {
					$box.scrollLeft(startScroll - dx);
					e.preventDefault();
				}
			});

			// 드래그 종료
			$(document).on(`mouseup${evt}`, e => {
				if (!down) return;
				down = false;
				$box.removeClass('dragging').css('user-select', '');
				if (moved && $(e.target).closest('a').length) e.preventDefault();
				moved = false; // 드래그 종료 시 상태 초기화
			});
		});
	}
    DragScroll($('.car-select-option-wrap'));
});
</script>

<a href="javascript:;" class="popup-btn" onclick="addrPopupAll();return false;">팝업 버튼</a>

<div class="dim dim-02"></div>

<div class="popup-layer" id="addrPopup">
    <div class="popup popup-01 popup-half"><!-- [D]작은 팝업인 경우 : popup-half / alert인 경우 : popup-small / 셀렉트박스 팝업 : popup-select -->
        <div class="inner">
            <div class="popup-text">
                <h1 tabindex="0">필터 선택</h1>
            </div>
            <div class="popup-contents flex-col pad-small"><!-- 2022-10-11 : pad-small 추가 -->
                <!-- content 시작 -->
                <div class="pop-car-filter">
                    <div class="pop-tab-box"><!-- 팝업에서 사용시 해당 div 필요 -->
                        <div class="tab-box7 js-tab"><!-- 모바일에서 왼쪽 정렬 : .left 추가 -->
                            <button class="on">전체</button>
                            <button>브랜드</button>
                            <button>가격대</button>
                        </div>
                    </div>
                    <p class="tit">브랜드</p>
                    <div class="car-select-tab">
                        <div class="tab-box6 js-tab">
                            <button class="all">전체<span class="hidden"> 선택됨</span></button>
                            <button class="m1">현대</button>
                            <button class="m2 on">기아</button>
                            <button class="m3">제네시스</button>
                            <button class="m4">쉐보레</button>
                            <button class="m5">르노삼성</button>
                            <button class="m6">KG</button>
                            <button class="m7">테슬라</button>
                        </div>
                    </div>
                    <p class="tit">가격대</p>
                    <div class="range-area">
                        <p class="range-tit">월 70만원 ~ 140만원</p>
                        <div id="slider"></div>
                        <div class="tx-area">
                            <p>0원</p>
                            <p>200만</p>
                        </div>
                    </div>
                    <div class="car-select-option-wrap">
                        <div class="car-select-option">
                            <div class="brand m2">기아<button>선택옵션삭제</button></div>
                            <div class="price">월 70만원~140만원<button>선택옵션삭제</button></div>
                            <div class="price">월 70만원~140만원<button>선택옵션삭제</button></div>
                            <div class="price">월 70만원~140만원<button>선택옵션삭제</button></div>
                            <div class="price">월 70만원~140만원<button>선택옵션삭제</button></div>
                        </div>
                    </div>
                </div>
                <!-- //content 끝 -->

                <!-- Start : 버튼 -->
                <div class="fixed-btn-area">
                    <div class="btn-box">
                        <span class="btn gray01 w-94"><button type="button" id="">초기화</button></span><!-- [D] 버튼 비활성화인 경우 : 클래스 gray 추가 -->
                        <span class="btn"><button type="button" id="">5대 차량 보기</button></span><!-- [D] 버튼 비활성화인 경우 : 클래스 gray 추가 -->
                    </div>
                </div>
                <!-- //End : 버튼 -->
            </div>
        </div>
        <!--<div class="popup-close"><a href="javascript:;"><img src="/static/web/img/ico_close.png" alt="닫기"></a></div>-->
    </div>

</div>


</body>
</html>