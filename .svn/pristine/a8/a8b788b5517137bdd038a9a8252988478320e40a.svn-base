<!DOCTYPE HTML>
<html lang="ko">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<%@ page language="java" contentType="text/html; charset=utf-8" pageEncoding="UTF-8"%>

<title>iM캐피탈 관리자</title>
<link type="text/css" rel="stylesheet" href="/static/admin/css/admin_new.css">
<link rel="shortcut icon" type="image/x-icon" href="/static/admin/img/common/dgb.ico" />

<!-- SecureFrame Start-->

<!-- SecureFrame End-->

<script type="text/javascript" src="/static/admin/js/dgbjquery-1.11.1.js"></script>
<script type="text/javascript" src="/static/admin/js/jquery.easing.js"></script>
<script type="text/javascript" src="/static/admin/js/css_browser_selector.min.js"></script>
<script type="text/javascript" src="/static/admin/js/commmd5.js"></script>       <!-- md5 -->
<script type="text/javascript" src="/static/admin/js/commonEncode.js"></script>
<script type="text/javascript" src="/static/admin/js/common.js"></script>

<script type="text/javascript">

	$(document).ready(function(){

	});


	function goInsert(){
		if(validate()){

			var frm  = document.frm;
			frm.PWD.value = MD5(frm.PWD.value);

			frm.METHOD.value = "UserInfoIns";
			frm.action = "/admin/AdminUserInfoAction.do";
			EncForm(frm);
			frm.submit();
		}
	}


	function validate(){
		
		if( $('#idCheck').val() != $('#ID').val()){
			alert("ID 중복체크가 필요합니다.");
			return false;
		}

		if( $("input[name='NAME']").val() == "" ){
			alert("성명을 입력하세요.");
			return false;
		}

		if( $("input[name='ID']").val() == ""){
			alert("아이디를 입력하세요.");
			return false;
		}

		if( $("input[name='PWD']").val() == "" ){
			alert("비밀번호를 입력하세요.");
			return false;
		}


		var chk = false;
		for(var i=1;i<7;i++){

			if($('#PERM0' + i + '_CHK').is(":checked")){
				$('#PERM0' + i + '').val("Y");
				chk = true;
			}else{
				$('#PERM0' + i + '').val("N");
			}			
		}
		

		if(!chk){
			alert("관리권한을 선택하십시요.");
			return false;
		}

		return true;	
	}



	//ID 체크
	function ajaxCheckId(){

		if( $("input[name='ID']").val() == ""){
			alert("아이디를 입력하세요.");
			return false;
		}

		var frm  = document.frm;
		var sFrm = document.sendForm;

		frm.METHOD.value       = "IdDupChk";
//		frm.PWD.value = MD5(frm.PWD.value);

		sendAjaxAction(frm , sFrm, "callbackCheckId", "/admin/AdminUserInfoAction.do");
	}

	//ID체크 - 콜백
	function callbackCheckId(result){
		var frm = document.frm;

		var INIpluginData = $(result).find("INIpluginData").attr("value");

		var ResDoc = Idecrypt(INIpluginData);
		var count  = $(ResDoc).find("RESULT").attr("value");

		if(count == "1"){
			$('#idCheck').val($("input[name='ID']").val());
			alert("사용가능한 ID 입니다.");
		}else{
			$("input[name='ID']").val('');
			$('#idCheck').val('');
			alert("사용중인 ID 입니다.");
		}
	}

	// 조회
	function goSearch(){

		var f = document.frm;
		f.METHOD.value = "UserInfoLst";
		f.action = "/admin/AdminUserInfoAction.do";
		EncForm(f);
		f.submit();
	}

</script>
</head>




<body>
	<div class="wrapper">
		<div class="header">
			<jsp:include page="/admin/inc/header_new.jsp" flush="false"> 
				<jsp:param name="menuNo" value="2"/> 
			</jsp:include>
		</div> <!--// header -->

		<div class="container">
			<div class="local-menu">
				<jsp:include page="/admin/inc/leftMenu.jsp" flush="false"> 
					<jsp:param name="menuNo" value="2"/>
					<jsp:param name="subMenuNo" value="1"/>
				</jsp:include>
			</div> <!--// leftarea -->


			<div class="content-wrap">
				<h3>관리자 관리</h3>
				<div class="contents">
					<div class="tit_area">
						<h4 class="dl_tb_tit">관리자 정보 등록</h4>
						<p class="txt_required">* 필수항목입니다</p>
					</div>
					<div class="form-type bbs-form">
						<table class="bbs-table-view">
							<caption>
								<p class="blind">성명, 아이디, 비밀번호, 관리권한의 정보를 입력하는 관리자 정보 등록입니다</p>
							</caption>
							<colgroup>
								<col style="width:200px;">
								<col style="width:auto;">
							</colgroup>
							<tbody>
								<tr>								
									<th scope="row">성명 <em>*</em></th>
									<td><input type="text" id="NAME" name="NAME" style="width:250px;" title="성명  입력"></td>
								</tr>
								<tr>								
									<th scope="row">아이디 <em>*</em></th>
									<td><input type="text" id="ID" name="ID" style="width:250px;" title="아이디 입력"><a href="#none" class="btn h42 neg" onClick="javascript:ajaxCheckId();">중복체크</a><em>* 이용가능한 아이디입니다. / * 해당 아이디는 사용중입니다.</em></td>
								</tr>
								<tr>								
									<th scope="row">비밀번호 <em>*</em></th>
									<td><input type="password" id="PWD" NAME="PWD" style="width:250px;" title="비밀번호 입력"></td>
								</tr>
								<tr>								
									<th scope="row">관리권한 <em>*</em></th>
									<td>
										<div>
											<span class="cb-wrap">
												<input type="checkbox" name="PERM01_CHK" id="PERM01_CHK" >
												<label for="PERM01_CHK">오토론 관리</label>
											</span>
											<span class="cb-wrap">
												<input type="checkbox" name="PERM02_CHK" id="PERM02_CHK" >
												<label for="PERM02_CHK">권한 관리</label>
											</span>
											<span class="cb-wrap">
												<input type="checkbox" name="PERM04_CHK" id="PERM04_CHK" >
												<label for="PERM04_CHK">채용 관리</label>
											</span>
											<span class="cb-wrap">
												<input type="checkbox" name="PERM03_CHK" id="PERM03_CHK" >
												<label for="PERM03_CHK">게시판 관리</label>
											</span>
											<span class="cb-wrap">
												<input type="checkbox" name="PERM05_CHK" id="PERM05_CHK" >
												<label for="PERM05_CHK">DSR 관리</label>
											</span>
											<span class="cb-wrap">
												<input type="checkbox" name="PERM06_CHK" id="PERM06_CHK" >
												<label for="PERM06_CHK">DSR 직원</label>
											</span>
										</div>
									</td>
								</tr>
							</tbody>
						</table>
						<p class="btn-align-center">
							<a href="#none" class="btn h42" onClick="javascript:goInsert();">확인</a>
							<a href="#none" class="btn h42 neg" onClick="javascript:goSearch();">목록</a>
						</p>
					</div>
					
				</div><!--// contents -->
			</div><!--// content-wrap -->

		</div><!--// container -->

		<div class="footer">
			<jsp:include page="/admin/inc/footer.jsp" flush="false"></jsp:include>
		</div><!--// footer -->
	</div><!--// wrapper -->
</body>
</html>