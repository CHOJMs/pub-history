<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko" lang="ko">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<%@ page contentType="text/html; charset=euc-kr" language="java" %>

<title>DGB 캐피탈 관리자</title>
<link type="text/css" rel="stylesheet" href="/static/admin/css/admin_new.css">
<link rel="shortcut icon" type="image/x-icon" href="/static/admin/img/common/dgb.ico" />

<!-- SecureFrame Start-->

<!-- SecureFrame End-->

<script type="text/javascript" src="/static/admin/js/dgbjquery-1.11.1.js"></script>
<script type="text/javascript" src="/static/admin/js/jquery.easing.js"></script>
<script type="text/javascript" src="/static/admin/js/css_browser_selector.min.js"></script>
<script type="text/javascript" src="/static/admin/js/commmd5.js"></script>       <!-- md5 -->
<script type="text/javascript" src="/static/admin/js/commonEncode.js"></script>
<script type="text/javascript" src="/static/admin/js/common.js"></script>

<script type="text/javascript">

	$(document).ready(function(){

	});


	function goInsert(){
		if(validate()){

			var frm  = document.frm;
			frm.PWD.value = MD5(frm.PWD.value);

			frm.METHOD.value = "UserInfoIns";
			frm.action = "/admin/AdminUserInfoAction.do";
			EncForm(frm);
			frm.submit();
		}
	}


	function validate(){
		
		if( $('#idCheck').val() != $('#ID').val()){
			alert("ID 중복체크가 필요합니다.");
			return false;
		}

		if( $("input[name='NAME']").val() == "" ){
			alert("성명을 입력하세요.");
			return false;
		}

		if( $("input[name='ID']").val() == ""){
			alert("아이디를 입력하세요.");
			return false;
		}

		if( $("input[name='PWD']").val() == "" ){
			alert("비밀번호를 입력하세요.");
			return false;
		}


		var chk = false;
		for(var i=1;i<7;i++){

			if($('#PERM0' + i + '_CHK').is(":checked")){
				$('#PERM0' + i + '').val("Y");
				chk = true;
			}else{
				$('#PERM0' + i + '').val("N");
			}			
		}
		

		if(!chk){
			alert("관리권한을 선택하십시요.");
			return false;
		}

		return true;	
	}



	//ID 체크
	function ajaxCheckId(){

		if( $("input[name='ID']").val() == ""){
			alert("아이디를 입력하세요.");
			return false;
		}

		var frm  = document.frm;
		var sFrm = document.sendForm;

		frm.METHOD.value       = "IdDupChk";
//		frm.PWD.value = MD5(frm.PWD.value);

		sendAjaxAction(frm , sFrm, "callbackCheckId", "/admin/AdminUserInfoAction.do");
	}

	//ID체크 - 콜백
	function callbackCheckId(result){
		var frm = document.frm;

		var INIpluginData = $(result).find("INIpluginData").attr("value");

		var ResDoc = Idecrypt(INIpluginData);
		var count  = $(ResDoc).find("RESULT").attr("value");

		if(count == "1"){
			$('#idCheck').val($("input[name='ID']").val());
			alert("사용가능한 ID 입니다.");
		}else{
			$("input[name='ID']").val('');
			$('#idCheck').val('');
			alert("사용중인 ID 입니다.");
		}
	}

	// 조회
	function goSearch(){

		var f = document.frm;
		f.METHOD.value = "UserInfoLst";
		f.action = "/admin/AdminUserInfoAction.do";
		EncForm(f);
		f.submit();
	}

</script>
</head>




<body>
	<div class="wrapper">
		<div class="header">
			<jsp:include page="/admin/inc/header_new.jsp" flush="false"> 
				<jsp:param name="menuNo" value="2"/> 
			</jsp:include>
		</div> <!--// header -->

		<div class="container">
			<div class="local-menu">
				<jsp:include page="/admin/inc/leftMenu.jsp" flush="false"> 
					<jsp:param name="menuNo" value="2"/>
					<jsp:param name="subMenuNo" value="1"/>
				</jsp:include>
			</div> <!--// leftarea -->


		<form name="frm">
			<input type="hidden" name="METHOD" />
			<input type="hidden" name="INIpluginData" />
			<input type="hidden" name="LOGIN_SVC"  value="N"/>
			<input type='hidden' name="menuNo"	value="2" />
			<input type='hidden' name="subMenuNo"	value="1" />


			<input type="hidden" name="idCheck" id="idCheck" value="" />
			<input type="hidden" name="PERM01" id="PERM01" value="" />
			<input type="hidden" name="PERM02" id="PERM02" value="" />
			<input type="hidden" name="PERM03" id="PERM03" value="" />
			<input type="hidden" name="PERM04" id="PERM04" value="" />
			<input type="hidden" name="PERM05" id="PERM05" value="" />
			<input type="hidden" name="PERM06" id="PERM06" value="" />

			<!-- 조회 조건 -->
			<input type='hidden' name="PERM_SELECT"	value="" />
			<input type='hidden' name="ID_SELECT"	value="" />
			<input type='hidden' name="PGE_NO"	value="" />


			<div class="content-wrap">
				<h3>관리자 관리</h3>
				<div class="contents">
					<h4>관리자 정보 등록</h4>
					<p class="align-right"><em>* 필수항목입니다.</em></p>
					<br>
					<fieldset class="form-type bbs-form">
						<div class="dl-type tb">
							<dl>
								<dt><label for="NAME">성명 <em>*</em></label></dt>
								<dd><div><input type="text" id="NAME" name="NAME" class="wd2"></div></dd>
							</dl>
							<dl>
								<dt><label for="ID">아이디 <em>*</em></label></dt>
								<dd>
									<div>
										<input type="text" id="ID" name="ID"  class="wd2">
										<a href="#none" class="btn h42" onClick="javascript:ajaxCheckId();">중복체크</a>
									</div>
								</dd>
							</dl>
							<dl>
								<dt><label for="PWD">비밀번호 <em>*</em></label></dt>
								<dd><div><input type="password" id="PWD" NAME="PWD" class="wd2"></div></dd>
							</dl>
							<dl>
								<dt><span>관리권한 <em>*</em></span></dt>
								<dd><div>
									<span class="cb-wrap">
										<input type="checkbox" name="PERM01_CHK" id="PERM01_CHK" >
										<label for="PERM01_CHK">오토론 관리</label>
									</span>
									<span class="cb-wrap">
										<input type="checkbox" name="PERM02_CHK" id="PERM02_CHK" >
										<label for="PERM02_CHK">권한 관리</label>
									</span>
									<span class="cb-wrap">
										<input type="checkbox" name="PERM03_CHK" id="PERM03_CHK" >
										<label for="PERM03_CHK">게시판 관리</label>
									</span>
									<span class="cb-wrap">
										<input type="checkbox" name="PERM04_CHK" id="PERM04_CHK" >
										<label for="PERM04_CHK">채용 관리</label>
									</span>
									<span class="cb-wrap">
										<input type="checkbox" name="PERM05_CHK" id="PERM05_CHK" >
										<label for="PERM05_CHK">DSR 상담사</label>
									</span>
									<span class="cb-wrap">
										<input type="checkbox" name="PERM06_CHK" id="PERM06_CHK" >
										<label for="PERM06_CHK">DSR 직원</label>
									</span>
								</div></dd>
							</dl>
						</div>
						<br>
						<br>
						<p class="align-center">
							<a href="#none" class="btn h42" onClick="javascript:goInsert();">등록</a>
							<a href="#none" class="btn h42 neg" onClick="javascript:goSearch();">목록</a>
						</p>
					</fieldset>
				</div><!--// contents -->
			</div><!--// content-wrap -->
			</form>

		</div><!--// container -->

		<div class="footer">
			<jsp:include page="/admin/inc/footer.jsp" flush="false"></jsp:include>
		</div><!--// footer -->
	</div><!--// wrapper -->
</body>
</html>