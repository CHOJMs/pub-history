
var _MAIN_URL_ = "/main.do";		// 서비스 메인(MAIN) URL 지정, 특정 서비스의 메인으로 이동해야하는 경우 해당 서비스에서 해당 메인 정보 재 설정
var _PLATFORM_ = "1";

jQuery(document).ready(function() {

	if (!GlobalJSConfig.isMobileDevice) {
		// tel: 링크 PC 디바이스에서 무효화
//		$("a[href^='tel:']:visible").css('cursor', "default").click(function(e) { e.preventDefault(); }); // 무의미한 링크 제공으로 웹접근성 위배로 사용하지 않음.
		$("a[href^='tel:']:visible").contents().unwrap();
	} else {

		// 웹접근성 관련 : 건너뛰기 링크의 초점 이동 및 android OS에서의 링크 표시 등 문제가 있기 때문에 건너뛰기 링크를 삭제함.(웹와치 권장)
		$("#tab_skip").remove();

		// APP 일 경우 TEL: 링크 Native 전화걸기 인터페이스 호출
		if (GlobalJSConfig.isApp) {
			$(document).on("click", "a[href^='tel:']:visible", function(e) {
				e.preventDefault();
				var tel = $(this).attr("href").replace(/tel:/i, "");
				Native.callPhone(tel);
			});
		}
	}


	// input "number" type maxlength 처리
	$("input[type=number]").on("keyup", function(e) {

		if ( e.keyCode == 8 ) return;

		var maxlength = $(this).attr("maxlength");
	    if ( maxlength != null && maxlength != "" && maxlength != undefined ) {
	        var val = $.trim($(this).val());
	        if (val != null && val != "") {
	            var valLength = val.length;
	            if (valLength >= maxlength) {
	                $(this).val(val.substring(0, maxlength));
	            }
	        }
	    }
	});

	// 주민번호 앞자리 6자리 입력 되면 뒷자리로 이동
	if (GlobalJSConfig.isApplyWA === false) {
		$("#rrn1").on("keyup", function(e) {
			var rrn1 = $("#rrn1").val();
			if ( rrn1.length == 6 && ((e.keyCode>47) && (e.keyCode<58) || (e.keyCode>95) && (e.keyCode<106) || e.keyCode==120)) {
				$("#rrn2").focus().trigger("click");
				return;
			}
		});
	}

	// 주민번호 앞자리 클릭시 가상키패드 종료
//	$("#rrn1").on("focus", function(e) {
//		if (keypadFlag && $("#nfilter_document").length > 0) {
//			nshc.close(document.getElementById("rrn2"), "close");
//		}
//	});


	// 알림센터 버튼 (only App)
	$(".alram").click(function() {
		// App Token, app 종류코드 설정
		var acReqParams = {};
		acReqParams.appToknCntn = $util.base64.decode(exjs.cookie.get("TOKEN"));
		acReqParams.appKncd = exjs.cookie.get("APPKNCD");

		var path = _PLATFORM_ == "1" ? "/common/alarmCenter.do" : "/moffice/alarmCenter.do";
		closeGnb();
		post_to_url(path, acReqParams);
	});
});

/**
 * 텍스트박스 입력 제한 formatter 설정
 * 		ex) <input type="text" formatter="number" maxlength="15">
 */
(function($){ $(document).ready(initFormatter); })(jQuery);

function initFormatter() {
	// 숫자
	$("[formatter=number]").on("change input", function(event) { $(this).val($(this).val().replace(/\D/g, "")); })

	// 숫자 + dot(.)
	$("[formatter=numberDot]").on("change input", function(event) { $(this).val($(this).val().replace(/[^0-9.]/g, "")); })

	// 이메일 앞자리(한글입력불가)
	//$("[formatter=email]").on("change input", function(event) { $(this).val($(this).val().replace(/[ㄱ-ㅎㅏ-ㅣ가-힣\u318D\u119E\u11A2\u2025]/g, "")); })

	// 쉼표 단위 숫자
	$("[formatter=money]").on('change input keyup', function(event) {
		var val = $(this).val().replace(/\D/g, "");
		if(val == "") { $(this).val(val); return false; }
		var maxlen = !isNaN($(this).attr('maxlength')) ? parseInt($(this).attr('maxlength')) : -1;	if(maxlen > 0 && val.length > maxlen) { val = val.slice(0, maxlen); } /* MS Edge에서 콤마추가 로직이 들어가면 기본 maxlength 처리가 무시되는 문제 해결*/
		$(this).val(Number(val).toString().replace(/(\d)(?=(?:\d{3})+(?!\d))/g, "$1,"));
	})

	// 한글
	$("[formatter=hangul]")
//		.on('change', function(event) { $(this).val($(this).val().replace(/[^\u3131-\u314e|\u314f-\u3163|\uac00-\ud7a3]/g, "")); })
//		.on('input' , function(event) { $(this).val($(this).val().replace(/[^\u3131-\u314e|\u314f-\u3163|\uac00-\ud7a3]/g, "")); })
		.blockInput({regex : "[" + Pattern.KOREAN + "]"})
		.css({"ime-mode":"active","-webkit-ime-mode":"active","-moz-ime-mode":"active","-ms-ime-mode":"active"});

	// 영문
	$("[formatter=english]")
		.blockInput({regex : "[" + Pattern.ENGLISH_LOWER + Pattern.ENGLISH_UPPER + "]"})
		.css({"ime-mode":"inactive","-webkit-ime-mode":"inactive","-moz-ime-mode":"inactive","-ms-ime-mode":"inactive"});

	// 날짜 하이픈
	$("[formatter=date]").on('change input keyup', function(event) {
		var val = $(this).val().replace(/\D/g, "");
		if(val == "") { $(this).val(val); return false; }

		if (val.length > 6 ) {
			val = Number(val).toString().replace(/(\d{4})(\d{2})(\d+)/g, "$1-$2-$3");
		} else if (val.length > 4 && val.length < 8) {
			val = Number(val).toString().replace(/(\d{4})(\d+)/g, "$1-$2");
		} else {
			val = Number(val).toString().replace(/(\d)/g, "$1");
		}

		var maxlen = !isNaN($(this).attr('maxlength')) ? parseInt($(this).attr('maxlength')) : -1;	if(maxlen > 0 && val.length > maxlen) { val = val.slice(0, maxlen); }
		$(this).val(val);
	})

    // 생일 하이픈 (YY-MM-DD)
    $("[formatter=birthday]").on('change input keyup', function(event) {
        var val = $(this).val().replace(/\D/g, "");
        if(val == "") { $(this).val(val); return false; }

        if (val.length > 4 ) {
            val = Number(val).toString().replace(/(\d{2})(\d{2})(\d+)/g, "$1-$2-$3");
        } else if (val.length > 2 && val.length < 6) {
            val = Number(val).toString().replace(/(\d{2})(\d+)/g, "$1-$2");
        } else {
            val = Number(val).toString().replace(/(\d)/g, "$1");
        }

        var maxlen = !isNaN($(this).attr('maxlength')) ? parseInt($(this).attr('maxlength')) : -1;  if(maxlen > 0 && val.length > maxlen) { val = val.slice(0, maxlen); }
        $(this).val(val);
    })

}

var Pattern = {
		KOREAN : "ㄱ-ㅎㅏ-ㅣ가-힣\u318D\u119E\u11A2\u2025",
		SIGN : "\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7E",
		ENGLISH_UPPER : "A-Z",
		ENGLISH_LOWER : "a-z",
		NUMBER : "0-9",
		HASH : "\x45",
		DOT : "\x2E",
		DASH : "\x2D",
		SPLIT : "\x7C",
		SPACE : "\x20"
	};

// 사용자의 입력을 제어
$.fn.blockInput = function(options) {
	function findDelta(value, prevValue) {
		var delta = '';

		for (var i = 0; i < value.length; i++) {
			var str = value.substr(0, i) + value.substr(i + value.length - prevValue.length);

			if (str === prevValue) {
				delta = value.substr(i, value.length - prevValue.length);
			}
		}

		return delta;
	}

	// 문자단위 유효성 체크
	function isValidChar(c) {
		return new RegExp(options.regex).test(c);
	}

	// 문자열의 유효성 체크
	function isValidString(str) {
		for (var i = 0; i < str.length; i++) {
			if (!isValidChar(str.substr(i, 1))) {
				return false;
			}
		}

		return true;
	}

	// input 이벤트 발생시 제어
	this.filter('input[formatter]').on('input', function() {
		var val = $(this).val(), lastVal = $(this).data('lastVal');
		//console.log("val=", val);
		//console.log("lastVal=", lastVal);

		var inserted = findDelta(val, lastVal);

		var removed = findDelta(lastVal, val);

		var pasted = inserted.length > 1 || (!inserted && !removed);

		if (pasted) {
			// 문자열 붙여넣기 (허용되지 않은 문자열이나 최대 길이를 넘어선 경우 원복)
			if (!isValidString(val)) {
				$(this).val(lastVal);
				if (options.msg) {
					alert(options.msg);
				}
			}
		} else if (!removed) {
			// 키패드 입력 (허용되지 않은 문자열이나 최대 길이를 넘어선 경우 원복)
			if (!isValidChar(inserted)) {
				$(this).val(lastVal);
				if (options.msg) {
					alert(options.msg);
				}
			}
		}

		$(this).data('lastVal', $(this).val());
	}).on('focus', function() {
		$(this).data('lastVal', $(this).val());
	});

	return this;
};


/**
 * [공통]
 * 인증 성공시, 로그인 처리 함수
 *
 * 1. 인증세션정보(CertVo)와 사용자 입력 정보 체크
 * 2. (고객번호) or (고객명, 고객실명번호)로 고객정보 조회
 * 3. 로그인세션(MyDGBCertVo) 생성
 * 4. AUTH Token(JWT) 생성
 *
 * 정상 로그인 처리 이후
 *  - WEB : menu 값을 설정하여 페이지 이동처리
 *  - APP : APP 로그인 처리(Native.setLogin)
 *       - 처리 후, ReDirectURL로 이동
 */
 function fn_mydgbLogin(params) {
	// 로딩바 노출
	showLoading();


	setTimeout(function() {
		$.ajax({
			url: "/mydgb/mydgbLogin.do",
			type: "post",
			dataType: "json",
			async: false,
			data: params,
			success: function (data) {
				console.log("forwardSendForm() : " + toJsonString(data));
				if(data.resultCode == "0000") {
					if(IS_APP) {
						if(params.goPageFlag != null && params.goPageFlag != undefined && !params.goPageFlag) {
								Native.setLogin(params.loginType, data.authToken, params.custNo, "setLoginCallback2");
						} else {
								setLogin(params.loginType, data.authToken, params.custNo);
						}
					} else {
						var menu = params.menu;
						var url = "/mydgb/authStep.do";
						if (menu != 1) url += "?menu=" + menu;
						if (menu === "4") url = "/main.do";
						post_to_url(url);
					}
				} else {
					alert(data.resultMsg);
				}
			}, error : function(request, status, error) {
				alert("요청 처리 중 에러가 발생 했습니다");
				console.log("code : " + request.status + "\nmessage : " + request.responseText + "\nerror : " + error);
				// alert("[fn_mydgbLogin] code : " + request.status + "\nmessage : " + request.responseText + "\nerror : " + error);
			}, complete : function() {
				hideLoading();
			}
		});
	}, 0);
}

// 설정 페이지 이동 (APP)
function goSetting() {
	closeGnb();
	if(exjs.cookie.get("TOKEN") == "" || exjs.cookie.get("APPKNCD") == "" || exjs.cookie.get("OSKNCD") == "") {
		Native.getAppInfo("getAppInfoForGoSettingCallback");
	} else {
		showLoading();
		setTimeout(function() { hideLoading(); }, 1000);

		var settingForm = document.createElement("form");
		settingForm.setAttribute("method", "post");
		settingForm.setAttribute("action", _PLATFORM_ == "1" ? "/common/app/setting.do" : "/moffice/app/setting.do");

		$util.createHiddenField(settingForm, "appToknCntn", $util.base64.decode(exjs.cookie.get("TOKEN")));
		$util.createHiddenField(settingForm, "appKncd", exjs.cookie.get("APPKNCD"));
		$util.createHiddenField(settingForm, "osKncd", exjs.cookie.get("OSKNCD"));
		document.body.appendChild(settingForm);

		settingForm.submit();
	}
}

window.getAppInfoForGoSettingCallback = function(jsonData) {
	console.log("getAppInfoForGoSettingCallback : " + toJsonString(jsonData));

	var resultData = getJsonData(toJsonString(jsonData));
	if (resultData.RESULT_CODE == "0000") {
		var dataSet = resultData.RESULT_DATASET;
		if(val == null || val == undefined || val == "") {
			showLoading();
			setTimeout(function() { hideLoading(); }, 1000);

			var settingForm = document.createElement("form");
			settingForm.setAttribute("method", "post");
			settingForm.setAttribute("action", _PLATFORM_ == "1" ? "/common/app/setting.do" : "/moffice/app/setting.do");

			$util.createHiddenField(settingForm, "appToknCntn", $util.base64.decode(dataSet.TOKEN));
			$util.createHiddenField(settingForm, "appKncd", dataSet.APPKNCD);
			$util.createHiddenField(settingForm, "osKncd", dataSet.OSKNCD);
			document.body.appendChild(settingForm);

			settingForm.submit();
		}
	}
};

/**
 * 숫자만 입력 이벤트 핸들러
 *
 * ex) 대출금액
 *     <input type="number" onkeyup="taddComma(this);" onkeydown="onlyNum(event);" value="">
 */
function onlyNum(e){
    var key;
    if(window.event)
         key = window.event.keyCode; //IE
    else key = e.which; //firefox

    //var event;

    if(!((key >= 48 && key <= 57)
            || (key == 8)
            || (key == 9)
            || (key >= 96 && key <= 105))
            || key == 229
            || e.shiftKey
            )
       {
        e.preventDefault ? e.preventDefault() : e.returnValue = false;
       }
}

/**
 * 숫자와 닷(.) 만 입력
 *
 * ex) 대출금리
 *     <input type="number" name="rate" id="rate" onkeydown="onlyNum2(event);">
 */
function onlyNum2(e){
    var key;
    if(window.event)
         key = window.event.keyCode; //IE
    else key = e.which; //firefox

    //var event;

    if(!((key >= 48 && key <= 57)
            || (key == 8)
            || (key == 9)
            || (key == 190)
            || (key == 110)
            || (key >= 96 && key <= 105))){

        e.preventDefault ? e.preventDefault() : e.returnValue = false;
       }
}

// KeyUp 이벤트 테스트용 (숫자만 입력)
function checkInput(ob) {
	var invalidChars = /[^0-9]/gi
	if (invalidChars.test(ob.value)) {
		ob.value = ob.value.replace(invalidChars, "");
	}
}

//한글만 입력
function hangul(){
	var ua = navigator.userAgent;
	if((event.keyCode < 12592) || (event.keyCode > 12687)){
		if(ua.indexOf("Trident/7.0") != -1){
			event.preventDefault();
		}else{
			event.returnValue = false;
		}
	}
}

function emptyToZero(num){
	if(isNaN(num)){
		return 0;
	}
	if(num == "" || num == null ){
		return 0;
	}else{
		return parseInt(num);
	}
}


/**
* 오늘날짜 yyyymmdd 기준에서 한달전
*/
function getLastMonth() {
	var _date = new Date();
	var _year = _date.getFullYear();
	var _month = "" + (_date.getMonth()+1);
	var _day = "" + _date.getDate();

	if(_month.length == 1) _month = "0" + _month;

	if(_day.length == 1) _day = "0" + _day;

	var tmp = "" + _year + _month-1 + _day;

	return tmp;
}

function getLastWeek() {
		var date = new Date();

		date.setDate(date.getDate()-7);

		var _year = date.getFullYear();
		var _month = "" + (date.getMonth()+1);
		var _day = "" + date.getDate();

		if(_month.length == 1) _month = "0" + _month;

		if(_day.length == 1) _day = "0" + _day;

		var tmp = "" + _year + _month + _day;

		return tmp;
}

/**
* 오늘날짜와 parameter 일 차이 비교
* parameter time: Date 형식의 String  ex) yyyymmdd
*/
function getBetweenDay(dateString) {
	var today = new Date();
	var dateObj = toDateObject(dateString);

	var betweenDay = (today.getTime() - dateObj.getTime())/1000/60/60/24;

	return betweenDay;
}

function toDateObject(dateString) { //parseTime(time)

	var _pattern = /^([0-9]{4})(-?)(1[0-2]|0[1-9])\2(3[01]|0[1-9]|[12][0-9])$/;
	var _match = _pattern.exec(dateString);

	if( _match ) {
		var year  = _match[1];
	    var month = _match[3]  - 1; // 1월=0,12월=11
	    var day   = _match[4];

	    return new Date(year,month,day,0,0,0);
	} else {
		return "";
	}
}


/**
 * 페이지이동
 *	url : url주소
 * 	linkTarget : 링크타겟
 * 		_blank : 새창
 * 		빈값 or _self : 현재창
 */
function goPage(url, linkTarget) {
	closeGnb();

	if (!$.isEmpty(url)) {
		if ($.isEmpty(linkTarget)) {
			// 로딩바
			if(isMobile.IOS()) {
				showLoading(true);
			} else {
				$(window).on("beforeunload", function(){  setTimeout("showLoading(true)", 0); });
			}
			location.href = url;
		} else {
			window.open(url, linkTarget);
		}
	}
    return false;
};

function closeGnb() {

	// 모바일 GNB OPEN 상태인 경우 닫기 처리
	if ($('#header .header-inner').hasClass("open")) {
		$(".gnb-close a").trigger("click", {"isTrigger" : true});
	}

	// 모바일 메인 MY-DGB 영역이 OPEN 상태인 경우 닫기 처리
	if ($('.mobile-mydgb').hasClass('view')) {
		$('.my-arrow').click();
	}
}


function goPageReplace(page) {
    // 로딩바
    if(isMobile.IOS()) {
        showLoading(true);
    } else {
        $(window).on("beforeunload", function(){  setTimeout("showLoading(true)", 0); });
    }

    setTimeout(function(){
        location.replace(page);
    }, 10);
    return false;
};

/**
 * 서비스 메인으로 이동
 */
function goMain () {

	var referrer = document.referrer;

	console.log(">>> goMain : referer = " + referrer);

	var url = _MAIN_URL_ || "/main.do";

//	if (referrer != null && referrer.indexOf("/moffice/") >= 0) {
//		url = "/moffice/mofficeMain.do";
//	}

	window.location.replace(url);
}

//새탭 열기
function newOpenWindow(url){
//	window.open("about:blank").location.href=url;
//	window.open("about:blank").location.replace(url);
	window.open(url);
};

function post_to_url(path, params, method) {
	closeGnb();
	method = method || "post"; // Set method to post by default, if not specified.

    // The rest of this code assumes you are not using a library.
    // It can be made less wordy if you use one.
    var form = document.createElement("form");
    form.setAttribute("method", method);
    form.setAttribute("action", path);

    for (var key in params) {
        var hiddenField = document.createElement("input");
        hiddenField.setAttribute("type", "hidden");
        hiddenField.setAttribute("name", key);
        hiddenField.setAttribute("value", params[key]);

        form.appendChild(hiddenField);
    }

    document.body.appendChild(form);

    // 로딩바
	if(isMobile.IOS()) {
		showLoading(true);
	} else {
		$(window).on("beforeunload", function(){  setTimeout("showLoading(true)", 0); });
	}

    setTimeout(function(){
    	form.submit();
 	}, 10);

    return false;
}

function post_to_form(path, frm, method) {

	method = method || "post"; // Set method to post by default, if not specified.
    frm.action = path;
    frm.method = method;

    // 로딩바
	if(isMobile.IOS()) {
		showLoading(true);
	} else {
		$(window).on("beforeunload", function(){  setTimeout("showLoading(true)", 0); });
	}

    setTimeout(function(){
    	frm.submit();
 	}, 10);

    return false;
}

// post submit blank(새창에서 post submit)
function post_to_url_blank(path, params, method) {

	method = method || "post"; // Set method to post by default, if not specified.

    // The rest of this code assumes you are not using a library.
    // It can be made less wordy if you use one.
    var form = document.createElement("form");
    form.setAttribute("method", method);
    form.setAttribute("action", path);
    form.setAttribute("target", '_blank');

    for (var key in params) {
        var hiddenField = document.createElement("input");
        hiddenField.setAttribute("type", "hidden");
        hiddenField.setAttribute("name", key);
        hiddenField.setAttribute("value", params[key]);

        form.appendChild(hiddenField);
    }

    document.body.appendChild(form);

    // 로딩바
	if(isMobile.IOS()) {
		showLoading(true);
	} else {
		$(window).on("beforeunload", function(){  setTimeout("showLoading(true)", 0); });
	}

    setTimeout(function(){
    	form.submit();
 	}, 10);

    return false;
}


/**
 * 실패 메시지 기본 ALERT (for 통신연동)
 * @param resultCode
 * @param resultMsg
 * @returns
 */
function defaultFailAlert(resultCode, resultMsg) {

	var rtmsg = "요청 처리 중 오류가 발생했습니다.";

	if (!$util.isEmpty(resultCode)) {
		rtmsg += "\n - 응답코드: [" + resultCode + "]";
	}
	if (!$util.isEmpty(resultMsg)) {
		rtmsg += "\n - 오류내용:\n "
		rtmsg += resultMsg.split("◎").join("\n");
	}

	alert(rtmsg);
}

/**
 * iM캐피탈 앱 AppLink URL 생성 (for 모바일웹)
 * @param path
 */
function getExecuteAppLink(path) {
	var query = "";
	if (path) {
		 query = "?path=" + encodeURIComponent(path);
	}
	return "/applink/finance/execute.do" + query;
}

/**
 *
 * @param path
 */
function goPersonalLoanWithAppLink(path) {

	// closeGnb();

	if (!GlobalJSConfig.isApp && GlobalJSConfig.isMobileDevice) {

		Message.confirm({
			message : "iM캐피탈 어플리케이션을 통해 진행하시면,\n보다 정확한 대출 실행이 가능합니다.",
			okBtn : "APP 실행하기",
			cancelBtn : "웹에서 계속 진행",
			okCallback : function () {
				// 모바일 환경에서 APP Link 실행
				location.href = getExecuteAppLink(path);
//				window.open(getExecuteAppLink(path));
			},
			cancelCallback : function () {
				// 웹에서 계속 진행
				goPage(path);
			},
			isTextAlignCenter : true
		});

	} else {
//		alert("지원하지 않는 기기입니다.");
		goPage(path);
	}
}


///////////////////////////////////////////////////////////////////////////////////////////////
// 레이어 팝업 / 로딩 호출 ---- !# TODO ui_common.js 파일에 관련 함수 정리할지 검토 필요
///////////////////////////////////////////////////////////////////////////////////////////////

function layer_open(popupId, target) {

	var temp = $('#' + popupId);

	uiCommon.openPopup(popupId);

	// 팝업 내 노출되는 tel: 링크 PC 디바이스에서 무효화
    if (!GlobalJSConfig.isMobileDevice) {
    	temp.find("a[href^='tel:']:visible").contents().unwrap();
	}
}

function layer_close(layerId) {

	uiCommon.closePopup(layerId);
}

function showLoading(isInAjax) {

//	console.log(">>> showLoading...");
//	console.log(">>> [param] isInAjax : " + isInAjax);

	uiCommon.showLoading(!!isInAjax);
};

function hideLoading() {

//	console.log(">>> hideLoading...");
//	console.log(">>> has inAjax : " + $("#loading").hasClass("inAjax"));

	if ($("#loading").hasClass("inAjax")) return;

	uiCommon.hideLoading();
}

function showKakaoLoading() {
//	console.log("showKakaoLoading...");
	uiCommon.openPopup("#kakaoLoadingLayerPopup");

};

function hideKakaoLoading() {
//	console.log("hideKakaoLoading...");
	uiCommon.closePopup("#kakaoLoadingLayerPopup");
}

/**
 * 홈페이지 모바일 헤더 뒤로가기 버튼 숨김 처리
 */
function hideMobileHeaderBackBtn() {
	// 모바일 헤더 뒤로가기버튼 비노출 처리
	$("#header div.mobile-btn").hide();
}

$(document).ready(function(){

	// 페이지가 로딩될 때 'Loading 이미지'를 숨긴다.
	// hideLoading();

    // ajax 실행 및 완료시 'Loading 이미지'의 동작을 컨트롤하자.
    $(document).ajaxStart(function() {
//    	console.log(">>> ajaxStart...");
    	showLoading();
    })
     .ajaxComplete(function() {
//    	console.log(">>> ajaxComplate...");
    })
    .ajaxStop(function() {
//    	console.log(">>> ajaxStop...");
    	hideLoading();
    });

});

$(window).on("pageshow", function (event) {
	if (event.originalEvent.persisted) {
//		console.log('BFCahe로부터 복원됨');
		$("#loading").removeClass("inAjax");
		hideLoading();
	}
	else {
//		console.log('새로 열린 페이지');
	}
});

///////////////////////////////////////////////////////////////////////////////////////////////
//레이어 팝업 / 로딩 호출
///////////////////////////////////////////////////////////////////////////////////////////////


//=======================================================================================================
//@Deprecated 제거 대상 (임시 백업)
//=======================================================================================================


function readyAlert() {
	alert("준비 중 입니다.");
}

function tel(telNum) {
	console.log("telNum: ", telNum);
	location.href="tel:"+telNum;
}

/**
* user-agent 체크 Hellper 객체
*/
var AgentUtils = function() {

	return {
		getUserAgent : function() {
			return navigator.userAgent;
		},
		isMobile : function(){
			return (this.isIos() || this.isAndroid()) ? true : false;
		},
		isIos : function() {
			var _isIos = navigator.userAgent.match(/iPhone|iPad|iPod/i) == null ? false : true;
			return  _isIos || (navigator.userAgent.match(/macintosh/i) != null && navigator.maxTouchPoints > 4) /* iPad OS 13 */
		},
		isAndroid : function() {
			return navigator.userAgent.match(/Android/i) == null ? false : true;
		},
		contains : function(value) {
			var regEx = new RegExp(value, "i");
			return navigator.userAgent.match(regEx) == null ? false : true;
		}
	}
}();


/**
* @Deprecated
*
* !# 레거시 호환용 ----------------------- TODO 추후 제거 예정
*/
var isMobile = {
   Android: function () {
 	  return AgentUtils.isAndroid();
   },
   IOS: function () {
 	  return AgentUtils.isIos();
   },
   BlackBerry: function () {
 	  return AgentUtils.contains("BlackBerry");
   },
   Opera: function () {
 	  return AgentUtils.contains("Opera Mini");
   },
   Windows: function () {
 	  return AgentUtils.contains("IEMobile");
   },
   any: function () {
       return (isMobile.Android() || isMobile.BlackBerry() || isMobile.IOS() || isMobile.Opera() || isMobile.Windows());
   }
};
