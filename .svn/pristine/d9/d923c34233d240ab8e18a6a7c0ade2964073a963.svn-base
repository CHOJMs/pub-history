<%@ page language="java" contentType="text/html; charset=euc-kr" pageEncoding="euc-kr"%>
<%-- START : SCRIPT로직 구현 --%>
<script type="text/javascript">

	function init_pop(){

		$('.layerPop_ui .close').click(function(){
			$('body').css('overflow','');
			$(".popScroll").mCustomScrollbar('disable');
		})

		$("#fModelName").focus(); 
	}

	function srchCarmodel(pageNm){
		if(!validation()){return;}

		document.submitForm_car.METHOD.value = "srchCarmodel";
		//$("#SRCH_DMSC_FRIG_DVCD").val($("#fKind").val());
		//$("#SRCH_VHCL_MDEL_LCCD").val($("#fMaker").val());
		//$("#SRCH_VHCL_KIND_DVCD").val($("#fCarPart").val());
		//$("#SRCH_VHCL_MDEL_MCCD").val($("#fCarKind").val());
		//$("#SRCH_VHCL_MDEL_NM").val($("#fModelName").val());
		$("#SRCH_RPRS_VHCL_NM").val($("#fModelName").val());
		$("#SRCH_VHCL_MDYM").val($("#fmdym").val());

		if(pageNm == null){
			pageNm = 1;
		}
			$("#SRCH_PRSN_NO").val(pageNm)

		var sFrm          = document.sendForm;
		sendAjaxAction(document.submitForm_car, sFrm, "fAjaxCallBack", "/dsr/dsrActionCommon.do");
	}

	function fAjaxCallBack(result){
		var INIpluginData = $(result).find("INIpluginData").attr("value");
		var decrypt = Idecrypt(INIpluginData);
		var renderedHtml = $(decrypt).find("htmlCode").attr("value");

		$("#tbl_popcarmodel tbody").html(renderedHtml);

		$("#tbl_popcarmodel tbody tr").each(function(){
			var targetVal1 = $(this).find("td").eq(6).text();
			$(this).find("td").eq(6).text(addComma2(targetVal1));

			$(this).find("td").eq(7).css("display", "none");
			$(this).find("td").eq(8).css("display", "none");
			$(this).find("td").eq(9).css("display", "none");
			$(this).find("td").eq(10).css("display", "none");
		});

		ajaxPaging(decrypt, 50);

		onclickSelectTd_car();
	}
	
	function movePage(pageNum){
		srchCarmodel(pageNum);
	}
	
	function confirm_pop(){

		var trIdx = $("input[name=Jsel]:checked").index('input[name=Jsel]');
		
		if(trIdx < 0){
			alert("선택된 값이 없습니다.");
			return;
		}

		var selectTd = $("#tbl_popcarmodel tbody tr").eq(trIdx).find("td");
		
		if(!field.length+1 > selectTd.length){
			alert();
			return;
		}

		selectTd.each(function(idx){
			if(idx < 1){return true;}
			if(field[idx-1] == null || field[idx-1] == ""){return true;}
			$("#"+field[idx-1]).val($(this).text());
		});

		popCloseScrollbar();
	}

	function validation(){
		if($("#fmdym").val() == "" && $("#fModelName").val() == ""){
			alert("모델명을 입력하여 주세요.");
			return false;
		}

		return true;
	}

	function reset_pop(){
		$(".search_ui select").each(function(){
			$(this).find("option").eq(0).prop("selected", "selected");
		})
		$("#tbl_popcarmodel tbody").html("");
		$(".search_ui input[type=text]").val("");
		$("#paging").html("");
		$("#totl_cnt").text("0");
	}

	function close_pop(){
		$('.layerPop_ui').hide();
		popCloseScrollbar();
	}

	function onclickSelectTd_car(){
		$("#tbl_popcarmodel tbody tr").on("click", function(){
			$("input#fJsel"+$(this).index()).prop("checked", "checked");
		})
	} 

	function enter_srchCarmodel(e){
		if(e.keyCode == "13"){
			srchCarmodel();
		}
	}
</script>
<%--   END : SCRIPT로직 구현 --%>
	


		<div class="layer_pop pop_carMode">
			<h1>차량 검색</h1>
			<div class="cons">
				<div class="search_ui">
					<div class="box">
						<!--label for="fKind" class="tit">국산/외산  :&nbsp;</label>
						<select id="fKind" class="size01">
						</select>
						<label for="fMaker" class="tit">메이커  :&nbsp;</label>
						<select id="fMaker" class="size01">
						</select>
						<label for="fCarPart" class="tit">차량구분  :&nbsp;</label>
						<select id="fCarPart" class="size01">
						</select>
						<p>
							<label for="fCarKind" class="tit type">차종  :&nbsp;</label>
							<select id="fCarKind" class="size01">
							</select>
							<label for="fModelName" class="tit">모델명 :&nbsp;</label>
							<input type="text" id="fModelName" maxlength="20">
							&nbsp;<a href="#" class="btnS01" onclick="srchCarmodel();return false;">조회</a>
						</p-->
						<label for="fKind" class="tit">대표차종 :&nbsp;</label><input type="text" id="fModelName" maxlength="20" onkeydown="enter_srchCarmodel(event);">
						<label for="fCarKind" class="tit">연식 :&nbsp;</label><input type="text" id="fmdym" maxlength="20" onkeydown="enter_srchCarmodel(event);">
						<a href="#" class="btnS01" onclick="srchCarmodel();return false;">조회</a>

					</div>
				</div><!-- //search_ui -->
				<h2 class="titH2_pop">중고차시세</h2>
				<p class="para01">조회건수 <strong><span id="totl_cnt">0</span></strong>건</p>
				<div class="popScroll06">
					<table class="tbl_col02" cellpadding="0" cellspacing="0" id="tbl_popcarmodel">
						<caption>중고차시세 결과</caption>
						<colgroup>
							<col width="60px" />
							<col width="85px" />
							<col width="85px" />
							<col width="100px" />
							<col width="135px" />
							<col width="85px" />
							<col width="" />
						</colgroup>
						<thead>
						<tr>
							<th scope="col">선택</th>
							<th scope="col">국산수입</th>
							<th scope="col">차종</th>
							<th scope="col">차명</th>
							<th scope="col">모델명</th>
							<th scope="col">연식</th>
							<th scope="col">시세</th>
						</tr>
						</thead>
						<tbody>
						<tr>
							<td><span class="chk_radio sel"><input type="radio" id="fCsel01" name="Csel" /><label for="fCsel01"><span>선택</span></label></span></td>
							<td>국산</td>
							<td>현대</td>
							<td>그랜져</td>
							<td class="cell_type01">HG그랜져 2.4 모던</td>
							<td>0000</td>
							<td>00,000,000</td>
							<td>0,000</td>
							<td>승용</td>
							<td>오토</td>
							<td>가솔린</td>
						</tr>
						</tbody>
					</table>
					<div class="paging" id="paging"> 
						<a href="맨처음" class="first">첫페이지</a> 
						<a href="이전" class="prev">이전 블럭</a>
						<ul>
							<li><strong>1</strong></li>
							<li><a href="">2</a></li>
							<li><a href="">3</a></li>
							<li><a href="">4</a></li>
							<li><a href="">5</a></li>
						</ul>
						<a href="다음" class="next">다음 블럭</a>
						<a href="맨 마지막" class="last">마지막 페이지</a>
					</div>
				</div><!-- //popScroll06 -->
				<p class="btn_g">
					<a href="#" class="btnP01" onclick="reset_pop();return false;">초기화</a>
					<a href="#1" class="btnP01" onclick="confirm_pop();return false;">확인</a>
					<a href="#1" class="btnP01" onclick="close_pop();return false;">닫기</a>
				</p>
			</div>
		</div>

		

		<form name="submitForm_car" method="post">
		<input type="hidden" name="METHOD"/>
		<input type="hidden" name="LOGIN_SVC" id="LOGIN_SVC" value="N" /> <%-- 공통코드조회 비로그인서비스 --%>
		<input type="hidden" name="SRCH_COM_CD_YN" id="SRCH_COM_CD_YN" />
		<input type="hidden" name="SRCH_SMPL_LCCD" id="SRCH_SMPL_LCCD" />
		<input type="hidden" name="SRCH_SMPL_MCCD" id="SRCH_SMPL_MCCD" />
		<input type="hidden" name="SRCH_SMPL_SCCD" id="SRCH_SMPL_SCCD" />
		<input type="hidden" name="SRCH_ETC_CD1" id="SRCH_ETC_CD1" />
		<input type="hidden" name="SRCH_ETC_CD2" id="SRCH_ETC_CD2" />
		<input type="hidden" name="SRCH_ETC_CD3" id="SRCH_ETC_CD3" />
		<input type="hidden" name="SRCH_ETC_CD4" id="SRCH_ETC_CD4" />
		<input type="hidden" name="SRCH_ETC_CD5" id="SRCH_ETC_CD5" />
		<input type="hidden" name="SRCH_PRSN_NO" id="SRCH_PRSN_NO" />

		<input type="hidden" name="SRCH_DMSC_FRIG_DVCD" id="SRCH_DMSC_FRIG_DVCD" />
		<input type="hidden" name="SRCH_VHCL_MDEL_LCCD" id="SRCH_VHCL_MDEL_LCCD" />
		<input type="hidden" name="SRCH_VHCL_KIND_DVCD" id="SRCH_VHCL_KIND_DVCD" />
		<input type="hidden" name="SRCH_VHCL_MDEL_MCCD" id="SRCH_VHCL_MDEL_MCCD" />
		<input type="hidden" name="SRCH_VHCL_MDEL_NM" id="SRCH_VHCL_MDEL_NM" />
		<input type="hidden" name="SRCH_RPRS_VHCL_NM" id="SRCH_RPRS_VHCL_NM" />
		<input type="hidden" name="SRCH_VHCL_MDYM" id="SRCH_VHCL_MDYM" />
		<input type="hidden" name="SRCH_PRSN_NO" id="SRCH_PRSN_NO" />
		</form>